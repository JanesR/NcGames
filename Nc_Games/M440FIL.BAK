#INCLUDE "TOPCONN.CH"
#INCLUDE "PROTHEUS.CH"
#INCLUDE "RWMAKE.CH"
#include "ap5mail.ch"
/*

ฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑ
ฑฑษออออออออออัออออออออออหอออออออัออออออออออออออออออออหออออออัอออออออออออออปฑฑ
ฑฑบPrograma  ณM440FIL  บAutor  ณMicrosiga  	        บ Data ณ  09/04/10   บฑฑ
ฑฑฬออออออออออุออออออออออสอออออออฯออออออออออออออออออออสออออออฯอออออออออออออนฑฑ
ฑฑบDesc.     ณPonto de entrada para filtro do Browse da libera็ใo do 	  บฑฑ
ฑฑบ          ณpedido de venda                                             บฑฑ
ฑฑฬออออออออออุออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออนฑฑ
ฑฑบUso       ณ AP                                                         บฑฑ
ฑฑศออออออออออฯออออออออออออออออออออออออออออออออออออออออออออออออออออออออออออผฑฑ
ฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑฑ
฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿฿
*/
User Function M440FIL()
Local aArea 	:= GetArea()
Local cRetFil	:="@ C5_YORIGEM=' ' "
Local lPvSite	:=IsInCallStack("U_ECM08LPV")                    
Local lLibADM	:=IsInCallStack("U_M001LibAdm")
                      
                      
If lPvSite	
	cRetFil	+=" AND C5_XECOMER='C' " 	
Else
	cRetFil	+=" AND C5_XECOMER <> 'C' " 	
	
	If lLibADM
		cRetFil	+=" And C5_XSTAPED In('10','15')	   
		cRetFil	+=" And C5_YSTATUS In('01','06')	   
		cRetFil	+=" And C5_LIBEROK=' ' "
		cRetFil	+=" And C5_NOTA=' '"
		cRetFil	+=" And C5_BLQ=' ' "
		cRetFil	+=" And C5_BLQ=' ' "		
		cRetFil	+=" And Not Exists ( Select 'X' From "+RetSqlName("SC9")+" SC9 Where C9_FILIAL=C5_FILIAL And C9_PEDIDO=C5_NUM And SC9.D_E_L_E_T_	=' ')"	
	
	Endif
	
EndIf


RestArea(aArea)
Return  cRetFil
